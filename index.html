<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Secret Lives of Quantum</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    animation: {
                        'pulse-quantum': 'pulseQuantum 2s infinite',
                        'spin-entangle': 'spinEntangle 3s infinite linear',
                        'flow': 'flow 3s linear infinite',
                        'bounce-celebration': 'bounceCelebration 2s infinite',
                        'pulse-arrow': 'pulseArrow 1s ease-in-out',
                        'rotate-sphere': 'rotateSphere 4s infinite linear',
                        'celebration-flow': 'celebrationFlow 2s infinite',
                        'firework': 'firework 1.5s ease-out forwards'
                    },
                    keyframes: {
                        pulseQuantum: {
                            '0%, 100%': { transform: 'scale(1)', boxShadow: '0 4px 12px rgba(124, 58, 237, 0.3)' },
                            '50%': { transform: 'scale(1.05)', boxShadow: '0 6px 20px rgba(124, 58, 237, 0.4)' }
                        },
                        spinEntangle: {
                            '0%': { transform: 'rotate(0deg)' },
                            '100%': { transform: 'rotate(360deg)' }
                        },
                        flow: {
                            '0%': { backgroundPosition: '0% 50%' },
                            '100%': { backgroundPosition: '200% 50%' }
                        },
                        bounceCelebration: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' }
                        },
                        pulseArrow: {
                            '0%, 100%': { transform: 'translateX(-50%) translateY(-100%) rotateZ(0deg) scale(1)' },
                            '50%': { transform: 'translateX(-50%) translateY(-100%) rotateZ(0deg) scale(1.2)' }
                        },
                        rotateSphere: {
                            '0%': { transform: 'rotateY(0deg)' },
                            '100%': { transform: 'rotateY(360deg)' }
                        },
                        celebrationFlow: {
                            '0%': { opacity: '0', transform: 'translateX(-50px)' },
                            '50%': { opacity: '1' },
                            '100%': { opacity: '0', transform: 'translateX(50px)' }
                        },
                        firework: {
                            '0%': { transform: 'translate(0, 0) scale(1)', opacity: '1' },
                            '100%': { transform: 'translate(var(--x), var(--y)) scale(0)', opacity: '0' }
                        }
                    },
                    maxWidth: {
                        '8xl': '1400px'
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom styles that Tailwind can't handle */
        .qubit-zero {
            background: linear-gradient(135deg, #0066cc, #004499);
        }
        .qubit-one {
            background: linear-gradient(135deg, #ff6b6b, #ff4444);
        }
        .qubit-superposition {
            background: linear-gradient(135deg, #7c3aed, #5b21b6);
        }
        
        .bloch-sphere-bg {
            background: 
                radial-gradient(ellipse 60px 40px at 60px 50px, rgba(255, 255, 255, 0.3), transparent 50%),
                radial-gradient(ellipse at 30% 20%, #f0f4f8, #e5e7eb 40%, #d1d5db 70%, #9ca3af);
        }
        
        .bloch-axis-vertical {
            background: linear-gradient(0deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.2));
        }
        
        .bloch-axis-horizontal {
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.2));
        }
        
        .entanglement-line {
            background: linear-gradient(90deg, 
                transparent, 
                #7c3aed 20%, 
                #0066cc 50%, 
                #7c3aed 80%, 
                transparent);
            background-size: 200% 100%;
        }
        
        .celebration-line {
            background: linear-gradient(90deg, transparent, #7c3aed, #0066cc, #7c3aed, transparent);
        }
        
        .celebration-qubit-classical {
            background: linear-gradient(135deg, #374151, #1f2937);
        }
        
        .celebration-qubit-quantum {
            background: linear-gradient(135deg, #0066cc, #004499);
        }
        
        .celebration-qubit-entangled {
            background: linear-gradient(135deg, #7c3aed, #5b21b6);
        }
        
        .parallel-qubit-bg {
            background: linear-gradient(135deg, #7c3aed, #5b21b6);
        }
        
        .firework {
            animation: firework 1.5s ease-out forwards;
        }
        
        .entanglement-line::before,
        .entanglement-line::after {
            content: '';
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #7c3aed;
            top: -2px;
        }
        
        .entanglement-line::before {
            left: -4px;
        }
        
        .entanglement-line::after {
            right: -4px;
        }
        
        .bloch-vector::after {
            content: '';
            position: absolute;
            top: -5px;
            left: -2px;
            width: 0;
            height: 0;
            border-left: 4px solid transparent;
            border-right: 4px solid transparent;
            border-bottom: 8px solid #7c3aed;
            transition: all 0.5s ease;
        }
        
        .bloch-vector.highlighted::after {
            left: -3px;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-bottom: 10px solid #5b21b6;
            filter: drop-shadow(0 0 5px rgba(124, 58, 237, 0.5));
        }
        
        .bloch-axis::before {
            content: '';
            position: absolute;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 50%;
        }
        
        .bloch-axis.vertical::before {
            width: 6px;
            height: 6px;
            top: -3px;
            left: -2px;
        }
        
        .bloch-axis.horizontal::before {
            width: 6px;
            height: 6px;
            right: -3px;
            top: -2px;
        }
    </style>
</head>
<body class="bg-white text-gray-900 font-sans leading-relaxed">
    <div class="max-w-8xl mx-auto px-5">
        <div class="text-center py-8 border-b border-gray-200">
            <h1 class="text-3xl font-bold text-gray-900 tracking-tight">
                The Secret Lives of Quantum 
                <span class="inline-block bg-red-500 text-white px-2 py-1 rounded text-xs font-semibold uppercase tracking-wide ml-2 align-super">Alpha</span>
            </h1>
            <p class="text-sm text-gray-600 mt-2">Understanding quantum computing through interactive visualization</p>
            <div class="w-full h-1 bg-gray-200 rounded-full mt-5 mb-3 overflow-hidden">
                <div class="h-full bg-gray-900 transition-all duration-500 ease-out" id="progress-fill" style="width: 0%;"></div>
            </div>
            <div class="flex justify-between items-center text-sm">
                <div class="text-gray-600 font-medium" id="slide-counter">Step 1 of 21</div>
                <div class="text-gray-500" id="progress-text">Getting Started</div>
            </div>
        </div>
        
        <div class="my-8">
            <div class="text-left mb-6 px-10">
                <div class="text-gray-500 text-sm font-medium uppercase tracking-widest mb-2" id="chapter-number">Chapter 1</div>
                <h2 class="text-3xl font-bold text-gray-900 tracking-tight" id="chapter-title">Classical Computing</h2>
            </div>
            
            <div class="bg-gray-50 border border-gray-200 rounded-lg mx-10 mb-6 px-8 py-6 border-l-4 border-l-purple-600" id="step-explanation">
                <p class="text-gray-700 leading-relaxed" id="step-content">Welcome! Let's start with the basics: classical bits. These are the foundation of all digital computing. Click "Try It" to see how a classical bit works - it can only be 0 or 1, nothing in between.</p>
            </div>
            
            <div class="min-h-[450px] bg-gray-50 border border-gray-200 rounded-lg relative mx-10 mb-8 flex justify-center items-center flex-wrap shadow-sm" id="visualization-area">
                <!-- Classical Bit -->
                <div class="w-15 h-15 rounded-lg mx-2 flex items-center justify-center font-semibold text-lg transition-all duration-300 cursor-pointer hidden bg-gray-100 border-2 border-gray-200 text-gray-600" id="classical-bit">0</div>
                
                <!-- Binary Display -->
                <div class="hidden flex-col items-center gap-5" id="binary-display">
                    <div class="flex gap-2 items-center">
                        <div class="w-11 h-11 rounded bg-gray-100 border-2 border-gray-200 flex items-center justify-center font-semibold text-sm text-gray-600 transition-all duration-300" id="bit-0">0</div>
                        <div class="w-11 h-11 rounded bg-gray-900 border-2 border-gray-900 flex items-center justify-center font-semibold text-sm text-white transition-all duration-300 shadow-sm" id="bit-1">1</div>
                        <div class="w-11 h-11 rounded bg-gray-100 border-2 border-gray-200 flex items-center justify-center font-semibold text-sm text-gray-600 transition-all duration-300" id="bit-2">0</div>
                        <div class="w-11 h-11 rounded bg-gray-100 border-2 border-gray-200 flex items-center justify-center font-semibold text-sm text-gray-600 transition-all duration-300" id="bit-3">0</div>
                        <div class="w-11 h-11 rounded bg-gray-100 border-2 border-gray-200 flex items-center justify-center font-semibold text-sm text-gray-600 transition-all duration-300" id="bit-4">0</div>
                        <div class="w-11 h-11 rounded bg-gray-100 border-2 border-gray-200 flex items-center justify-center font-semibold text-sm text-gray-600 transition-all duration-300" id="bit-5">0</div>
                        <div class="w-11 h-11 rounded bg-gray-100 border-2 border-gray-200 flex items-center justify-center font-semibold text-sm text-gray-600 transition-all duration-300" id="bit-6">0</div>
                        <div class="w-11 h-11 rounded bg-gray-900 border-2 border-gray-900 flex items-center justify-center font-semibold text-sm text-white transition-all duration-300 shadow-sm" id="bit-7">1</div>
                        <span class="text-xl text-gray-600 font-medium mx-4">=</span>
                        <div class="text-3xl text-gray-900 font-bold min-w-[60px] text-center" id="result">A</div>
                    </div>
                    <div class="text-sm text-gray-500 font-medium mt-2">ASCII Binary (01000001 = 65 = 'A')</div>
                </div>
                
                <!-- Bloch Sphere -->
                <div class="w-50 h-50 rounded-full border-2 border-gray-300 relative mx-5 my-5 hidden bloch-sphere-bg shadow-inner" id="bloch-sphere">
                    <div class="bloch-axis vertical absolute w-0.5 h-45 left-1/2 top-2.5 -translate-x-1/2 rounded-sm shadow-sm"></div>
                    <div class="bloch-axis horizontal absolute w-45 h-0.5 top-1/2 left-2.5 -translate-y-1/2 rounded-sm shadow-sm"></div>
                    
                    <div class="absolute w-1 h-20 bg-purple-600 rounded-sm left-1/2 top-1/2 origin-bottom -translate-x-1/2 -translate-y-full transition-all duration-500 shadow-lg hidden" id="bloch-vector" style="transform: translateX(-50%) translateY(-100%) rotateZ(0deg);"></div>
                    
                    <div class="absolute text-gray-700 font-semibold text-sm bg-white/90 px-2 py-1 rounded shadow-sm -top-9 left-1/2 -translate-x-1/2">|0‚ü©</div>
                    <div class="absolute text-gray-700 font-semibold text-sm bg-white/90 px-2 py-1 rounded shadow-sm -bottom-9 left-1/2 -translate-x-1/2">|1‚ü©</div>
                </div>
                
                <!-- Main Qubit -->
                <div class="w-20 h-20 rounded-full mx-5 relative cursor-pointer transition-all duration-300 flex items-center justify-center font-semibold text-lg text-white hidden" id="main-qubit">|0‚ü©</div>
                
                <!-- Second Qubit -->
                <div class="w-20 h-20 rounded-full mx-5 relative cursor-pointer transition-all duration-300 flex items-center justify-center font-semibold text-lg text-white hidden" id="second-qubit">|0‚ü©</div>
                
                <!-- Entanglement Line -->
                <div class="absolute h-0.5 w-25 entanglement-line animate-flow opacity-0 transition-opacity duration-500 z-10" id="entanglement-line"></div>
                
                <!-- Quantum Gates -->
                <div class="w-24 h-12 bg-white border-2 border-gray-200 rounded flex items-center justify-center font-semibold text-lg cursor-pointer transition-all duration-200 mx-2 opacity-50 hover:bg-gray-50 hover:scale-105 hover:shadow-sm" id="x-gate" style="display: none;">X</div>
                <div class="w-24 h-12 bg-white border-2 border-gray-200 rounded flex items-center justify-center font-semibold text-lg cursor-pointer transition-all duration-200 mx-2 opacity-50 hover:bg-gray-50 hover:scale-105 hover:shadow-sm" id="h-gate" style="display: none;">H</div>
                <div class="w-24 h-12 bg-white border-2 border-gray-200 rounded flex items-center justify-center font-semibold text-lg cursor-pointer transition-all duration-200 mx-2 opacity-50 hover:bg-gray-50 hover:scale-105 hover:shadow-sm" id="z-gate" style="display: none;">Z</div>
                
                <!-- Measurement Qubits -->
                <div class="w-16 h-16 rounded-full mx-2 flex items-center justify-center font-semibold text-base text-white border-4 border-white hidden" id="measurement-qubit1">|0‚ü©</div>
                <div class="w-16 h-16 rounded-full mx-2 flex items-center justify-center font-semibold text-base text-white border-4 border-white hidden" id="measurement-qubit2">|1‚ü©</div>
                
                <!-- Celebration Container -->
                <div class="hidden relative w-full h-full justify-center items-center flex-wrap gap-8" id="celebration-container">
                    <div class="w-15 h-15 rounded-full relative flex items-center justify-center font-semibold text-sm transition-all duration-500 text-white shadow-lg celebration-qubit-classical animate-bounce-celebration">0</div>
                    <div class="w-30 h-30 rounded-full relative animate-rotate-sphere bloch-sphere-bg border-2 border-gray-300 shadow-xl"></div>
                    <div class="w-15 h-15 rounded-full relative flex items-center justify-center font-semibold text-sm transition-all duration-500 text-white shadow-lg celebration-qubit-quantum animate-pulse-quantum">|Œ®‚ü©</div>
                    <div class="w-15 h-15 rounded-full relative flex items-center justify-center font-semibold text-sm transition-all duration-500 text-white shadow-lg celebration-qubit-entangled animate-spin-entangle" id="cele-entangled1">|Œ®‚ü©</div>
                    <div class="w-15 h-15 rounded-full relative flex items-center justify-center font-semibold text-sm transition-all duration-500 text-white shadow-lg celebration-qubit-entangled animate-spin-entangle" id="cele-entangled2">|Œ®‚ü©</div>
                    <div class="celebration-line absolute h-0.5 w-25 opacity-0 animate-celebration-flow" id="cele-line1"></div>
                    <div class="celebration-line absolute h-0.5 w-25 opacity-0 animate-celebration-flow" id="cele-line2"></div>
                </div>
                
                <!-- Classical Search -->
                <div class="hidden flex-col items-center gap-5" id="classical-search">
                    <div class="bg-green-100 px-6 py-3 rounded border-2 border-green-500 font-medium">
                        üéØ Searching for pattern: <span class="text-green-700 font-bold text-lg">1011</span>
                    </div>
                    <div class="text-lg text-gray-600 font-semibold" id="search-counter">Combinations checked: 0 / 16</div>
                    <div class="grid grid-cols-4 gap-4" id="search-grid">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Quantum Parallel -->
                <div class="hidden flex-col items-center gap-5" id="quantum-parallel">
                    <div class="text-xl text-gray-900 font-semibold text-center mb-5">üöÄ Quantum Parallelism: All States Explored Simultaneously</div>
                    <div class="flex gap-5 justify-center my-5">
                        <div class="w-20 h-20 rounded-full border-4 border-white flex items-center justify-center font-semibold text-lg text-white relative animate-pulse-quantum parallel-qubit-bg shadow-lg" id="parallel-qubit1">|0‚ü©+|1‚ü©</div>
                        <div class="w-20 h-20 rounded-full border-4 border-white flex items-center justify-center font-semibold text-lg text-white relative animate-pulse-quantum parallel-qubit-bg shadow-lg" id="parallel-qubit2">|0‚ü©+|1‚ü©</div>
                        <div class="w-20 h-20 rounded-full border-4 border-white flex items-center justify-center font-semibold text-lg text-white relative animate-pulse-quantum parallel-qubit-bg shadow-lg" id="parallel-qubit3">|0‚ü©+|1‚ü©</div>
                        <div class="w-20 h-20 rounded-full border-4 border-white flex items-center justify-center font-semibold text-lg text-white relative animate-pulse-quantum parallel-qubit-bg shadow-lg" id="parallel-qubit4">|0‚ü©+|1‚ü©</div>
                    </div>
                    <div class="bg-gray-50 px-6 py-5 rounded-lg border border-gray-200 max-w-2xl text-center shadow-sm">
                        <div class="grid grid-cols-4 gap-2 my-5" id="parallel-states">
                            <!-- Will be populated by JavaScript -->
                        </div>
                        <div class="mt-4 text-lg text-purple-600 font-bold">
                            ‚ö° Quantum Advantage: Check all 16 combinations in a single operation!
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="text-center my-8 px-10 flex justify-center gap-3">
                <button class="bg-white text-gray-900 border-2 border-gray-200 px-7 py-3 rounded font-semibold text-sm transition-all duration-200 min-w-[140px] hover:bg-gray-50 hover:border-gray-300 hover:-translate-y-0.5 hover:shadow-sm disabled:bg-gray-100 disabled:text-gray-500 disabled:border-gray-200 disabled:cursor-not-allowed disabled:transform-none" id="prev-btn" onclick="prevStep()">Previous Step</button>
                <button class="bg-white text-gray-900 border-2 border-gray-200 px-7 py-3 rounded font-semibold text-sm transition-all duration-200 min-w-[140px] hover:bg-gray-50 hover:border-gray-300 hover:-translate-y-0.5 hover:shadow-sm" id="manual-btn" onclick="performManualAction()">Try It</button>
                <button class="bg-gray-900 text-white border-2 border-gray-900 px-7 py-3 rounded font-semibold text-sm transition-all duration-200 min-w-[140px] hover:bg-gray-700 hover:border-gray-700 hover:-translate-y-0.5 hover:shadow-sm" id="next-btn" onclick="nextStep()">Next Step</button>
            </div>
        </div>
        
        <div class="bg-gray-50 border border-gray-200 rounded-lg mx-10 mb-6 px-8 py-5 border-l-4 border-l-purple-600 hidden shadow-sm" id="result-area">
            <h4 class="text-lg font-semibold text-gray-900 mb-3">Try It Result</h4>
            <p class="text-gray-700 leading-relaxed whitespace-pre-line" id="result-text">Click "Try It" to see the result here!</p>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let isEntangled = false;
        let totalSteps = 21;
        
        const stepContent = {
            1: {
                chapter: "Chapter 1: Classical Computing",
                title: "What is a Classical Bit?",
                content: "All computers today use bits - the fundamental unit of information. A classical bit can only be in one of two states: 0 or 1. Click \"Try It\" to toggle between these two states.",
                action: () => {
                    resetVisualization();
                    showClassicalBit();
                    let bitState = 0;
                    setManualAction(() => {
                        bitState = 1 - bitState;
                        setClassicalBit(bitState);
                        showResult(`The bit is now: ${bitState}\n\nClassical bits are deterministic - they are always in exactly one state: either 0 or 1, never both.`, "Classical Bit State");
                    });
                }
            },
            2: {
                chapter: "Chapter 1: Classical Computing",
                title: "Building with Bits",
                content: "Multiple bits combine to represent larger numbers and data. Let's see how 8 bits (a byte) can represent letters and symbols using ASCII encoding.",
                action: () => {
                    resetVisualization();
                    showBinaryDisplay();
                    let patterns = [
                        {bits: [0,1,0,0,0,0,0,1], char: 'A', desc: 'Letter A'},
                        {bits: [0,1,0,0,0,0,1,0], char: 'B', desc: 'Letter B'},
                        {bits: [0,1,0,0,0,0,1,1], char: 'C', desc: 'Letter C'},
                        {bits: [0,0,1,0,0,0,0,1], char: '!', desc: 'Exclamation'}
                    ];
                    let currentPattern = 0;
                    
                    setManualAction(() => {
                        setBinaryPatternSilent(patterns[currentPattern].bits, patterns[currentPattern].char);
                        showResult(`8 bits forming: ${patterns[currentPattern].char} (${patterns[currentPattern].desc})\\n\\nBinary: ${patterns[currentPattern].bits.join('')}\\nDecimal: ${parseInt(patterns[currentPattern].bits.join(''), 2)}\\nCharacter: ${patterns[currentPattern].char}`, "Binary to ASCII");
                        currentPattern = (currentPattern + 1) % patterns.length;
                    });
                }
            },
            3: {
                chapter: "Chapter 2: Introduction to Quantum",
                title: "The Bloch Sphere",
                content: "Enter the quantum world! Quantum bits (qubits) are visualized using the Bloch sphere - a 3D representation where the top is |0‚ü©, bottom is |1‚ü©, and everywhere else represents quantum superposition.",
                action: () => {
                    resetVisualization();
                    showBlochSphere();
                    setManualAction(() => {
                        showResult("üåê The Bloch Sphere represents all possible qubit states:\\n\\n‚Ä¢ North Pole (top): |0‚ü© state\\n‚Ä¢ South Pole (bottom): |1‚ü© state\\n‚Ä¢ Equator: Maximum superposition states\\n‚Ä¢ Any point: A unique quantum state\\n\\nUnlike classical bits, qubits can exist anywhere on this sphere!", "Quantum State Space");
                    });
                }
            },
            4: {
                chapter: "Chapter 2: Introduction to Quantum",
                title: "The Quantum Bit (Qubit)",
                content: "A qubit starts in the |0‚ü© state, just like a classical bit. But here's where quantum mechanics gets interesting - qubits can do things classical bits cannot!",
                action: () => {
                    resetVisualization();
                    showBlochSphere();
                    showMainQubit();
                    setMainQubit('zero');
                    setManualAction(() => {
                        showBlochVector();
                        showResult("üîÆ This qubit is in the |0‚ü© state, pointing to the north pole of the Bloch sphere.\\n\\nThe arrow shows the qubit's state vector. Right now it's classical - definite and measurable.", "Qubit in |0‚ü© State");
                    });
                }
            },
            5: {
                chapter: "Chapter 2: Introduction to Quantum",
                title: "Quantum Superposition",
                content: "Here's where quantum gets weird! A qubit can be in superposition - existing as both |0‚ü© AND |1‚ü© simultaneously until measured. This is impossible for classical bits!",
                action: () => {
                    resetVisualization();
                    showBlochSphere();
                    showMainQubit();
                    setMainQubit('superposition');
                    setManualAction(() => {
                        highlightBlochVector();
                        showResult("üåÄ Quantum Superposition: |œà‚ü© = Œ±|0‚ü© + Œ≤|1‚ü©\\n\\nThe qubit exists in BOTH states simultaneously! The arrow points to the equator, representing maximum superposition.\\n\\nThis is the source of quantum computing's power!", "Superposition State");
                    });
                }
            },
            6: {
                chapter: "Chapter 2: Introduction to Quantum",
                title: "Quantum States",
                content: "Qubits can exist in any state on the Bloch sphere. Each position represents a different quantum state with unique properties and probabilities.",
                action: () => {
                    resetVisualization();
                    showBlochSphere();
                    showMainQubit();
                    setMainQubit('superposition');
                    let rotations = [0, 45, 90, 135, 180, 225, 270, 315];
                    let currentRotation = 0;
                    
                    setManualAction(() => {
                        rotateBlochVector(rotations[currentRotation]);
                        showBlochVector();
                        const angle = rotations[currentRotation];
                        showResult(`üéØ Qubit rotated to ${angle}¬∞\\n\\nEach angle represents a different quantum state:\\n‚Ä¢ 0¬∞: |0‚ü© state\\n‚Ä¢ 90¬∞: |+‚ü© superposition state\\n‚Ä¢ 180¬∞: |1‚ü© state\\n‚Ä¢ 270¬∞: |-‚ü© superposition state\\n\\nInfinite possibilities on the sphere!`, "Quantum State Rotation");
                        currentRotation = (currentRotation + 1) % rotations.length;
                    });
                }
            },
            7: {
                chapter: "Chapter 2: Introduction to Quantum",
                title: "Beyond Classical Computing",
                content: "We've seen how qubits differ from classical bits. Qubits can exist in superposition and be represented anywhere on the Bloch sphere. This opens up entirely new computational possibilities!",
                action: () => {
                    resetVisualization();
                    showBlochSphere();
                    showMainQubit();
                    setMainQubit('superposition');
                    showBlochVector();
                    setManualAction(() => {
                        highlightBlochVector();
                        showResult("üöÄ Quantum vs Classical:\\n\\nüìä Classical: 2 possible states (0 or 1)\\nüåÄ Quantum: Infinite states on Bloch sphere\\n\\nüíª Classical: Sequential processing\\n‚ö° Quantum: Parallel processing via superposition\\n\\nThis is just the beginning of quantum's advantages!", "Quantum Advantage Preview");
                    });
                }
            },
            8: {
                chapter: "Chapter 3: Quantum Qubits",
                title: "Working with Qubits",
                content: "Let's interact with qubits directly! We'll start with a single qubit and explore how it behaves compared to classical bits.",
                action: () => {
                    resetVisualization();
                    showMainQubit();
                    setMainQubit('zero');
                    setManualAction(() => {
                        if (document.getElementById('main-qubit').classList.contains('zero')) {
                            setMainQubit('superposition');
                            showResult("üåÄ Qubit in superposition!\\n\\nThe qubit is now in a quantum state: |œà‚ü© = (|0‚ü© + |1‚ü©)/‚àö2\\n\\nIt's simultaneously 0 AND 1 until measured.", "Superposition Created");
                        } else {
                            setMainQubit('zero');
                            showResult("üîÆ Qubit in |0‚ü© state\\n\\nThe qubit is now in a definite classical state.", "Classical State");
                        }
                    });
                }
            },
            9: {
                chapter: "Chapter 4: Quantum Gates",
                title: "The X Gate (NOT Gate)",
                content: "Quantum gates manipulate qubit states. The X gate is like a classical NOT gate - it flips |0‚ü© to |1‚ü© and vice versa. Click the X gate to see it in action!",
                action: () => {
                    resetVisualization();
                    showMainQubit();
                    showQuantumGate('x');
                    setMainQubit('zero');
                    setManualAction(() => {
                        applyXGate();
                        showResult("‚ö° X Gate Applied!\\n\\n|0‚ü© ‚Üí |1‚ü©\\n\\nThe X gate flips the qubit state, just like a classical NOT gate. It rotates the state 180¬∞ around the X-axis of the Bloch sphere.", "X Gate Operation");
                    });
                }
            },
            10: {
                chapter: "Chapter 4: Quantum Gates",
                title: "The H Gate (Hadamard Gate)",
                content: "The Hadamard gate creates superposition! It transforms |0‚ü© into (|0‚ü© + |1‚ü©)/‚àö2. This gate is unique to quantum computing - there's no classical equivalent.",
                action: () => {
                    resetVisualization();
                    showMainQubit();
                    showQuantumGate('h');
                    setMainQubit('zero');
                    setManualAction(() => {
                        applyHGate();
                        showResult("üåÄ Hadamard Gate Applied!\\n\\n|0‚ü© ‚Üí (|0‚ü© + |1‚ü©)/‚àö2\\n\\nThe qubit is now in perfect superposition! This is the foundation of quantum algorithms.", "Hadamard Gate Operation");
                    });
                }
            },
            11: {
                chapter: "Chapter 4: Quantum Gates",
                title: "The Z Gate (Phase Gate)",
                content: "The Z gate applies a phase flip to the |1‚ü© component of a superposition state. It's like the X gate but operates on quantum phase instead of amplitude.",
                action: () => {
                    resetVisualization();
                    showMainQubit();
                    showQuantumGate('z');
                    setMainQubit('superposition');
                    setManualAction(() => {
                        applyZGate();
                        showResult("‚ö° Z Gate Applied!\\n\\n(|0‚ü© + |1‚ü©)/‚àö2 ‚Üí (|0‚ü© - |1‚ü©)/‚àö2\\n\\nThe Z gate flipped the phase of the |1‚ü© component. The qubit is still in superposition, but with opposite phase!", "Z Gate Operation");
                    });
                }
            },
            12: {
                chapter: "Chapter 4: Quantum Gates",
                title: "Combining Gates",
                content: "Quantum gates can be combined to create complex operations. Try applying multiple gates in sequence to see how they transform the qubit state!",
                action: () => {
                    resetVisualization();
                    showMainQubit();
                    showQuantumGate('all');
                    setMainQubit('zero');
                    let gateSequence = [];
                    setManualAction(() => {
                        // Apply a random gate sequence
                        const gates = ['H', 'X', 'Z'];
                        const randomGate = gates[Math.floor(Math.random() * gates.length)];
                        gateSequence.push(randomGate);
                        
                        if (randomGate === 'H') applyHGate();
                        else if (randomGate === 'X') applyXGate();
                        else if (randomGate === 'Z') applyZGate();
                        
                        showResult(`üîß Applied ${randomGate} gate!\\n\\nGate sequence: ${gateSequence.join(' ‚Üí ')}\\n\\nQuantum circuits are built by combining gates in sequence. Each gate transforms the qubit state mathematically.`, "Gate Sequence");
                    });
                }
            },
            13: {
                chapter: "Chapter 5: Quantum Measurement",
                title: "The Measurement Problem",
                content: "When we measure a quantum system, something dramatic happens - the superposition collapses! The qubit 'chooses' either |0‚ü© or |1‚ü© randomly, destroying the quantum state.",
                action: () => {
                    resetVisualization();
                    showMainQubit();
                    setMainQubit('superposition');
                    setManualAction(() => {
                        const measurement = Math.random() < 0.5 ? 0 : 1;
                        setMainQubit(measurement === 0 ? 'zero' : 'one');
                        showResult(`üìä Measurement Result: |${measurement}‚ü©\\n\\nüåÄ Before: Superposition (|0‚ü© + |1‚ü©)/‚àö2\\nüìä After: Definite state |${measurement}‚ü©\\n\\nThe quantum superposition collapsed! This is the fundamental quantum measurement process.`, "Quantum Measurement");
                    });
                }
            },
            14: {
                chapter: "Chapter 5: Quantum Measurement",
                title: "Quantum Randomness",
                content: "Unlike classical computers which are deterministic, quantum measurements are truly random. Each measurement of a superposition state gives an unpredictable result!",
                action: () => {
                    resetVisualization();
                    showMainQubit();
                    let measurements = [];
                    setManualAction(() => {
                        setMainQubit('superposition');
                        setTimeout(() => {
                            const result = Math.random() < 0.5 ? 0 : 1;
                            measurements.push(result);
                            setMainQubit(result === 0 ? 'zero' : 'one');
                            const counts = measurements.reduce((acc, val) => {
                                acc[val] = (acc[val] || 0) + 1;
                                return acc;
                            }, {});
                            showResult(`üé≤ Measurement ${measurements.length}: |${result}‚ü©\\n\\nResults so far: ${measurements.join(', ')}\\n|0‚ü© count: ${counts[0] || 0}\\n|1‚ü© count: ${counts[1] || 0}\\n\\nEach measurement gives a random result from the quantum superposition!`, "Quantum Randomness");
                        }, 500);
                    });
                }
            },
            15: {
                chapter: "Chapter 6: Quantum Entanglement",
                title: "Creating Entanglement",
                content: "Now for quantum's most mysterious feature: entanglement! Two qubits can become 'quantum mechanically connected' - measuring one instantly affects the other, no matter how far apart they are.",
                action: () => {
                    resetVisualization();
                    showTwoQubits();
                    setManualAction(() => {
                        createEntanglement();
                        showResult("üîó Entanglement Created!\\n\\nThese qubits are now quantum mechanically connected. Their states are correlated in a way that has no classical analogue.\\n\\nEinstein called this 'spooky action at a distance' - but it's real!", "Quantum Entanglement");
                    });
                }
            },
            16: {
                chapter: "Chapter 6: Quantum Entanglement",
                title: "Measuring Entangled Qubits",
                content: "When you measure one entangled qubit, you instantly know the other's state! This correlation is stronger than anything possible in classical physics.",
                action: () => {
                    resetVisualization();
                    showTwoQubits();
                    createEntanglement();
                    setManualAction(() => {
                        measureEntangledPair();
                        setTimeout(() => {
                            showResult("üìä Entangled Measurement Complete!\\n\\nMeasuring the first qubit instantly determined the second qubit's state. This correlation exists even if the qubits are separated by vast distances!\\n\\nThis is the foundation of quantum communication and quantum computing.", "Entangled Measurement");
                        }, 500);
                    });
                }
            },
            17: {
                chapter: "Chapter 7: Quantum Advantage",
                title: "The Search Problem",
                content: "Imagine searching for one specific pattern among many possibilities. Classical computers must check each combination sequentially. Click \"Try It\" to watch a classical search!",
                action: () => {
                    resetVisualization();
                    showClassicalSearch();
                    let searchStep = 0;
                    const targetPattern = [1, 0, 1, 1];
                    const maxSteps = 16;
                    
                    setManualAction(() => {
                        if (searchStep < maxSteps) {
                            const found = updateClassicalSearch(searchStep, targetPattern);
                            searchStep++;
                            
                            if (found) {
                                showResult(`üéØ Found it! Pattern 1011 located after checking ${searchStep} combinations out of 16 possible.\\n\\nWith 10 bits: up to 1,024 checks needed\\nWith 20 bits: up to 1,048,576 checks!\\nWith 256 bits (encryption): 10‚Å∑‚Å∑ checks!`, "Pattern Found!");
                            } else {
                                showResult(`Searching... Checked ${searchStep} of 16 possible combinations.\\n\\nClassical computers must check each possibility one by one. The search time grows exponentially with the number of bits!`, "Still Searching...");
                            }
                        }
                    });
                }
            },
            18: {
                chapter: "Chapter 7: Quantum Advantage",
                title: "Quantum Parallelism",
                content: "While classical computers check one possibility at a time, quantum computers use superposition to evaluate ALL possibilities simultaneously! Click \"Try It\" to see quantum parallelism in action.",
                action: () => {
                    resetVisualization();
                    showQuantumParallel();
                    setManualAction(() => {
                        updateQuantumParallel();
                        showResult("üöÄ Quantum Magic: All 16 combinations processed simultaneously!\\n\\n‚ö° Classical: 16 sequential steps\\n‚ö° Quantum: 1 parallel operation\\n\\nThis exponential speedup is why quantum computers can break encryption, simulate molecules, and solve optimization problems that would take classical computers centuries!", "Quantum Parallelism Advantage");
                    });
                }
            },
            19: {
                chapter: "Chapter 7: Quantum Advantage",
                title: "Real-World Applications",
                content: "Quantum computers excel at specific problems: cryptography, drug discovery, optimization, and AI. Entanglement and superposition make these breakthroughs possible!",
                action: () => {
                    resetVisualization();
                    showTwoQubits();
                    createEntanglement();
                    setManualAction(() => {
                        measureEntangledPair();
                        setTimeout(() => {
                            showResult("üíä Drug Discovery: Simulate molecular interactions\\nüîê Cryptography: Break current encryption, create quantum-safe methods\\nüöó Optimization: Solve traffic flow and logistics\\nü§ñ AI: Enhance machine learning algorithms", "Quantum Applications");
                        }, 500);
                    });
                }
            },
            20: {
                chapter: "Chapter 7: Quantum Advantage",
                title: "Quantum Cryptography",
                content: "One of quantum computing's most immediate impacts is in cryptography. Quantum computers can break current encryption but also create unbreakable quantum-safe methods! Click \"Try It\" to explore quantum cryptography.",
                action: () => {
                    resetVisualization();
                    showTwoQubits();
                    createEntanglement();
                    setManualAction(() => {
                        measureEntangledPair();
                        setTimeout(() => {
                            showResult("üîê Quantum Cryptography Impact:\\n\\nüí• BREAKS current encryption: RSA, AES vulnerable to quantum algorithms\\nüõ°Ô∏è CREATES quantum-safe methods: Quantum key distribution is unbreakable\\nüîç DETECTS eavesdropping: Quantum measurement reveals intruders\\nüåê ENABLES secure communication: Quantum internet using entanglement\\n\\nPost-quantum cryptography is already being developed to prepare for the quantum revolution!", "Quantum Cryptography Revolution");
                        }, 500);
                    });
                }
            },
            21: {
                chapter: "Journey Complete!",
                title: "üéâ Congratulations!",
                content: "You've mastered the fundamentals of quantum computing! Click 'Celebrate' to see all the quantum phenomena you've learned working together in harmony.",
                action: () => {
                    resetVisualization();
                    showCelebration();
                    document.getElementById('next-btn').textContent = 'Start Over';
                    document.getElementById('manual-btn').textContent = 'Celebrate!';
                    
                    setManualAction(() => {
                        animateCelebration();
                        showResult("üéØ Classical Bits ‚Üí üîÆ Bloch Sphere ‚Üí ‚öõÔ∏è Qubits ‚Üí üåÄ Superposition ‚Üí üìä Measurement ‚Üí üîó Entanglement ‚Üí ‚ö° Quantum Gates ‚Üí üöÄ Quantum Advantage ‚Üí üîê Quantum Cryptography\\n\\nYou're now ready to explore the quantum future!", "Your Quantum Journey");
                    });
                }
            }
        };
        
        let manualAction = null;
        
        function setManualAction(action) {
            manualAction = action;
        }
        
        function performManualAction() {
            if (manualAction) {
                manualAction();
            }
        }
        
        function nextStep() {
            if (currentStep >= totalSteps) {
                currentStep = 1;
                document.getElementById('next-btn').textContent = 'Next Step';
                document.getElementById('manual-btn').style.display = 'inline-block';
            } else {
                currentStep++;
            }
            
            hideResult();
            updateProgress();
            updateButtonStates();
            
            const step = stepContent[currentStep];
            if (step) {
                updateChapterTitle(step.chapter);
                updateExplanation(step.content, step.title);
                step.action();
            }
        }
        
        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                
                hideResult();
                updateProgress();
                updateButtonStates();
                
                const step = stepContent[currentStep];
                if (step) {
                    updateChapterTitle(step.chapter);
                    updateExplanation(step.content, step.title);
                    step.action();
                }
            }
        }
        
        function updateProgress() {
            const progressFill = document.getElementById('progress-fill');
            const slideCounter = document.getElementById('slide-counter');
            const progressText = document.getElementById('progress-text');
            
            const percentage = (currentStep / totalSteps) * 100;
            progressFill.style.width = percentage + '%';
            
            slideCounter.textContent = `Step ${currentStep} of ${totalSteps}`;
            
            const progressMessages = {
                1: "Getting Started",
                2: "Classical Bits",
                3: "Quantum Basics",
                4: "Qubits Intro",
                5: "Superposition",
                6: "Quantum States",
                7: "Classical vs Quantum",
                8: "Working with Qubits",
                9: "X Gate",
                10: "H Gate",
                11: "Z Gate",
                12: "Gate Combinations",
                13: "Measurement Basics",
                14: "Measurement Randomness",
                15: "Creating Entanglement",
                16: "Entangled Measurement",
                17: "Why Quantum Matters",
                18: "Quantum Parallelism",
                19: "Real Applications",
                20: "Quantum Cryptography",
                21: "Journey Complete!"
            };
            
            progressText.textContent = progressMessages[currentStep] || "Learning";
        }
        
        function updateButtonStates() {
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            
            prevBtn.disabled = currentStep === 1;
            
            if (currentStep >= totalSteps) {
                nextBtn.textContent = 'Start Over';
            } else {
                nextBtn.textContent = 'Next Step';
            }
        }
        
        function updateChapterTitle(chapter) {
            const parts = chapter.split(': ');
            const chapterNumber = parts[0];
            const chapterTitle = parts[1] || '';
            
            document.getElementById('chapter-number').textContent = chapterNumber;
            document.getElementById('chapter-title').textContent = chapterTitle;
        }
        
        function updateExplanation(content, title) {
            const explanation = document.getElementById('step-explanation');
            explanation.innerHTML = `<h3 class="text-lg font-semibold text-gray-900 mb-3">${title}</h3><p class="text-gray-700 leading-relaxed">${content}</p>`;
        }
        
        function showResult(content, title = "Try It Result") {
            const resultArea = document.getElementById('result-area');
            const resultText = document.getElementById('result-text');
            resultArea.classList.remove('hidden');
            resultArea.querySelector('h4').textContent = title;
            resultText.textContent = content;
        }
        
        function hideResult() {
            const resultArea = document.getElementById('result-area');
            resultArea.classList.add('hidden');
        }
        
        function resetVisualization() {
            document.getElementById('classical-bit').style.display = 'none';
            document.getElementById('binary-display').classList.add('hidden');
            document.getElementById('bloch-sphere').classList.add('hidden');
            document.getElementById('bloch-vector').classList.add('hidden');
            document.getElementById('main-qubit').style.display = 'none';
            document.getElementById('second-qubit').classList.add('hidden');
            document.getElementById('entanglement-line').classList.add('opacity-0');
            document.getElementById('celebration-container').classList.add('hidden');
            document.getElementById('classical-search').classList.add('hidden');
            document.getElementById('quantum-parallel').classList.add('hidden');
            document.querySelectorAll('.quantum-gate').forEach(gate => {
                gate.classList.add('opacity-50');
                gate.style.display = 'none';
            });
            hideResult();
            isEntangled = false;
        }
        
        function showClassicalBit() {
            document.getElementById('classical-bit').style.display = 'flex';
            document.getElementById('bloch-sphere').classList.add('hidden');
        }
        
        function setClassicalBit(state) {
            const bit = document.getElementById('classical-bit');
            bit.textContent = state;
            if (state === 0) {
                bit.className = 'w-15 h-15 rounded-lg mx-2 flex items-center justify-center font-semibold text-lg transition-all duration-300 cursor-pointer bg-gray-100 border-2 border-gray-200 text-gray-600';
            } else {
                bit.className = 'w-15 h-15 rounded-lg mx-2 flex items-center justify-center font-semibold text-lg transition-all duration-300 cursor-pointer bg-gray-900 border-2 border-gray-900 text-white shadow-sm';
            }
        }
        
        function showBinaryDisplay() {
            document.getElementById('binary-display').classList.remove('hidden');
        }
        
        function setBinaryPatternSilent(pattern, result) {
            const bits = ['bit-0', 'bit-1', 'bit-2', 'bit-3', 'bit-4', 'bit-5', 'bit-6', 'bit-7'];
            bits.forEach((id, index) => {
                const bit = document.getElementById(id);
                bit.textContent = pattern[index];
                if (pattern[index] === 0) {
                    bit.className = 'w-11 h-11 rounded bg-gray-100 border-2 border-gray-200 flex items-center justify-center font-semibold text-sm text-gray-600 transition-all duration-300';
                } else {
                    bit.className = 'w-11 h-11 rounded bg-gray-900 border-2 border-gray-900 flex items-center justify-center font-semibold text-sm text-white transition-all duration-300 shadow-sm';
                }
            });
            document.getElementById('result').textContent = result;
        }
        
        function showBlochSphere() {
            document.getElementById('bloch-sphere').classList.remove('hidden');
        }
        
        function showMainQubit() {
            document.getElementById('main-qubit').style.display = 'flex';
        }
        
        function setMainQubit(state) {
            const qubit = document.getElementById('main-qubit');
            qubit.classList.remove('qubit-zero', 'qubit-one', 'qubit-superposition', 'animate-pulse-quantum');
            
            if (state === 'zero') {
                qubit.className += ' qubit-zero';
                qubit.textContent = '|0‚ü©';
            } else if (state === 'one') {
                qubit.className += ' qubit-one';
                qubit.textContent = '|1‚ü©';
            } else if (state === 'superposition') {
                qubit.className += ' qubit-superposition animate-pulse-quantum';
                qubit.textContent = '|œà‚ü©';
            }
        }
        
        function showBlochVector() {
            document.getElementById('bloch-vector').classList.remove('hidden');
        }
        
        function highlightBlochVector() {
            const vector = document.getElementById('bloch-vector');
            vector.classList.add('w-1', 'h-24', 'bg-purple-800', 'shadow-lg');
            vector.classList.add('animate-pulse-arrow');
        }
        
        function rotateBlochVector(angle) {
            const vector = document.getElementById('bloch-vector');
            vector.style.transform = `translateX(-50%) translateY(-100%) rotateZ(${angle}deg)`;
        }
        
        function showQuantumGate(type) {
            if (type === 'x' || type === 'all') {
                const xGate = document.getElementById('x-gate');
                xGate.style.display = 'flex';
                xGate.classList.remove('opacity-50');
                xGate.classList.add('border-purple-600', 'text-purple-600');
            }
            if (type === 'h' || type === 'all') {
                const hGate = document.getElementById('h-gate');
                hGate.style.display = 'flex';
                hGate.classList.remove('opacity-50');
                hGate.classList.add('border-purple-600', 'text-purple-600');
            }
            if (type === 'z' || type === 'all') {
                const zGate = document.getElementById('z-gate');
                zGate.style.display = 'flex';
                zGate.classList.remove('opacity-50');
                zGate.classList.add('border-purple-600', 'text-purple-600');
            }
        }
        
        function applyXGate() {
            const qubit = document.getElementById('main-qubit');
            if (qubit.classList.contains('qubit-zero')) {
                setMainQubit('one');
            } else {
                setMainQubit('zero');
            }
        }
        
        function applyHGate() {
            setMainQubit('superposition');
        }
        
        function applyZGate() {
            // Visual indication of phase flip
            const qubit = document.getElementById('main-qubit');
            qubit.style.transform = 'scale(1.1)';
            setTimeout(() => {
                qubit.style.transform = 'scale(1)';
            }, 300);
        }
        
        function showTwoQubits() {
            document.getElementById('main-qubit').style.display = 'flex';
            document.getElementById('second-qubit').classList.remove('hidden');
            setMainQubit('zero');
            setSecondQubit('zero');
        }
        
        function setSecondQubit(state) {
            const qubit = document.getElementById('second-qubit');
            qubit.classList.remove('qubit-zero', 'qubit-one', 'qubit-superposition', 'animate-pulse-quantum');
            
            if (state === 'zero') {
                qubit.className += ' qubit-zero';
                qubit.textContent = '|0‚ü©';
            } else if (state === 'one') {
                qubit.className += ' qubit-one';
                qubit.textContent = '|1‚ü©';
            } else if (state === 'superposition') {
                qubit.className += ' qubit-superposition animate-pulse-quantum';
                qubit.textContent = '|œà‚ü©';
            }
        }
        
        function createEntanglement() {
            document.getElementById('entanglement-line').classList.remove('opacity-0');
            setMainQubit('superposition');
            setSecondQubit('superposition');
            isEntangled = true;
        }
        
        function measureEntangledPair() {
            if (isEntangled) {
                const result1 = Math.random() < 0.5 ? 'zero' : 'one';
                const result2 = result1 === 'zero' ? 'one' : 'zero';
                
                document.getElementById('measurement-qubit1').style.display = 'flex';
                document.getElementById('measurement-qubit2').style.display = 'flex';
                
                if (result1 === 'zero') {
                    document.getElementById('measurement-qubit1').className += ' qubit-zero';
                    document.getElementById('measurement-qubit1').textContent = '|0‚ü©';
                } else {
                    document.getElementById('measurement-qubit1').className += ' qubit-one';
                    document.getElementById('measurement-qubit1').textContent = '|1‚ü©';
                }
                
                if (result2 === 'zero') {
                    document.getElementById('measurement-qubit2').className += ' qubit-zero';
                    document.getElementById('measurement-qubit2').textContent = '|0‚ü©';
                } else {
                    document.getElementById('measurement-qubit2').className += ' qubit-one';
                    document.getElementById('measurement-qubit2').textContent = '|1‚ü©';
                }
                
                setMainQubit(result1);
                setSecondQubit(result2);
            }
        }
        
        function showClassicalSearch() {
            document.getElementById('classical-search').classList.remove('hidden');
            const grid = document.getElementById('search-grid');
            grid.innerHTML = '';
            
            for (let i = 0; i < 16; i++) {
                const row = document.createElement('div');
                row.className = 'flex gap-1 p-2 rounded border-2 border-transparent transition-all duration-300';
                row.id = `search-row-${i}`;
                
                const binary = i.toString(2).padStart(4, '0');
                for (let j = 0; j < 4; j++) {
                    const bit = document.createElement('div');
                    bit.className = `w-9 h-9 rounded flex items-center justify-center font-semibold text-sm transition-all duration-300 ${binary[j] === '0' ? 'bg-gray-100 text-gray-600 border border-gray-200' : 'bg-gray-900 text-white border border-gray-900'}`;
                    bit.textContent = binary[j];
                    row.appendChild(bit);
                }
                
                grid.appendChild(row);
            }
            
            document.getElementById('search-counter').textContent = 'Combinations checked: 0 / 16';
        }
        
        function updateClassicalSearch(step, targetPattern) {
            const counter = document.getElementById('search-counter');
            const currentRow = document.getElementById(`search-row-${step}`);
            
            document.querySelectorAll('.search-row').forEach(row => {
                row.classList.remove('bg-yellow-100', 'border-yellow-400');
            });
            
            currentRow.classList.add('bg-yellow-100', 'border-yellow-400', 'scale-105');
            
            const binary = step.toString(2).padStart(4, '0');
            const targetBinary = targetPattern.join('');
            const found = binary === targetBinary;
            
            counter.textContent = `Combinations checked: ${step + 1} / 16`;
            
            setTimeout(() => {
                currentRow.classList.remove('bg-yellow-100', 'border-yellow-400', 'scale-105');
                if (found) {
                    currentRow.classList.add('bg-green-100', 'border-green-500', 'scale-105', 'shadow-lg');
                } else {
                    currentRow.classList.add('opacity-40');
                }
            }, 800);
            
            return found;
        }
        
        function showQuantumParallel() {
            document.getElementById('quantum-parallel').classList.remove('hidden');
            const statesGrid = document.getElementById('parallel-states');
            statesGrid.innerHTML = '';
            
            for (let i = 0; i < 16; i++) {
                const state = document.createElement('div');
                state.className = 'bg-gray-200 p-2 rounded text-center text-sm font-medium transition-all duration-300 text-gray-700';
                state.id = `parallel-state-${i}`;
                
                const binary = i.toString(2).padStart(4, '0');
                state.textContent = binary;
                
                statesGrid.appendChild(state);
            }
        }
        
        function updateQuantumParallel() {
            const states = document.querySelectorAll('.parallel-state');
            const targetPattern = '1011';
            
            states.forEach((state, index) => {
                setTimeout(() => {
                    state.classList.add('bg-yellow-100', 'border', 'border-yellow-400', 'scale-105');
                }, index * 50);
            });
            
            setTimeout(() => {
                states.forEach(state => {
                    if (state.textContent === targetPattern) {
                        state.classList.remove('bg-yellow-100', 'border-yellow-400');
                        state.classList.add('bg-green-200', 'border-green-500', 'scale-110', 'shadow-lg');
                    }
                });
            }, 1000);
        }
        
        function showCelebration() {
            document.getElementById('celebration-container').classList.remove('hidden');
        }
        
        function animateCelebration() {
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    createFirework();
                }, i * 200);
            }
        }
        
        function createFirework() {
            const container = document.getElementById('visualization-area');
            const firework = document.createElement('div');
            firework.className = 'firework absolute w-1 h-1 rounded-full';
            firework.style.background = `hsl(${Math.random() * 360}, 70%, 60%)`;
            firework.style.left = Math.random() * container.offsetWidth + 'px';
            firework.style.top = Math.random() * container.offsetHeight + 'px';
            firework.style.setProperty('--x', (Math.random() - 0.5) * 200 + 'px');
            firework.style.setProperty('--y', (Math.random() - 0.5) * 200 + 'px');
            
            container.appendChild(firework);
            
            setTimeout(() => {
                container.removeChild(firework);
            }, 1500);
        }
        
        // Initialize
        updateProgress();
        updateButtonStates();
        const step = stepContent[currentStep];
        if (step) {
            updateChapterTitle(step.chapter);
            updateExplanation(step.content, step.title);
            step.action();
        }
    </script>
</body>
</html>